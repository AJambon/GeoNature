<div class="media">
  <div *ngIf="bEdit; else displayMedia" class="media-form">
    <pnx-dynamic-form-generator
      #dynamicForm
      [autoGenerated]="true"
      [myFormGroup]="mediaForm"
      [formsDefinition]="mediaFormDefinition"
      (fileChange)="onFileChange($event)"
    ></pnx-dynamic-form-generator>
  </div>
  <ng-template #displayMedia>
    <a href="{{ media.href() }}">
      {{ media.title_fr }}
    </a>
    :
    {{ media.description_fr }}
  </ng-template>
  <div>
    <div *ngIf="bEditable" class="side-btns">
      <button
        *ngIf="!bEdit"
        class="btn btn-primary btn-sm"
        id="valid-media-btn"
        [disabled]="bFreeze || bLoading"
        (click)="editMedia()"
        title="{{ 'Media.edit' | translate }}"
      >
        <i id="icon-edit" class="fa fa-pencil" aria-hidden="true"></i>
      </button>

      <button
        *ngIf="bEdit"
        class="btn btn-primary btn-sm"
        id="valid-media-btn"
        (click)="cancelMedia()"
        [disabled]="bLoading"
        title="{{ 'Media.undo' | translate }}"
      >
        <i id="icon-undo" class="fa fa-undo" aria-hidden="true"></i>
      </button>

      <button
        *ngIf="bEdit"
        class="btn btn-success btn-sm"
        id="valid-media-btn"
        [disabled]="(bFreeze && !mediaForm.valid) || bLoading"
        (click)="validMedia()"
        title="{{ 'Media.valid' | translate }}"
      >
        <i id="icon-valid" class="fa fa-check" aria-hidden="true"></i>
      </button>

      <button
        class="btn btn-danger btn-sm"
        id="delete-media-btn"
        [disabled]="(bFreeze && !bEdit) || bLoading"
        (click)="deleteMedia()"
        title="{{ 'Media.delete' | translate }}"
      >
        <i id="icon-delete" class="fa fa-times" aria-hidden="true"></i>
      </button>
      <span *ngIf="bLoading">
        {{ 'Media.loading' | translate }} : {{ uploadPercentDone | number: '2.0' }} / 100
        <i id="icon-loading" class="fa fa-cog fa-spin"></i>
      </span>
    </div>
  </div>
</div>
