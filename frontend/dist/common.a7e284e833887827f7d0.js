(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{a4Ar:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r("5nLG"),r("bkLN");var n=function(){function e(e,t){this._ms=e,this.mapListService=t}return e.prototype.ngOnInit=function(){this.mapListService.idName=this.idName},e.prototype.ngAfterViewInit=function(){this.mapListService.enableMapListConnexion(this._ms.getMap())},e.prototype.onEachFeature=function(e,t){var r=this;this.mapListService.layerDict[e.id]=t,t.setStyle(this.mapListService.originStyle),t.on({click:function(n){r.mapListService.toggleStyle(t),r.mapListService.mapSelected.next(e.id),e.properties.leaflet_popup&&t.bindPopup(e.properties.leaflet_popup).openPopup()}})},e}()},"pz+G":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r("CcnG"),i=(r("zjWw"),r("5nLG"),r("5weA"),n["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function a(e){return n["\u0275vid"](0,[],null,null)}},t4k0:function(e,t,r){"use strict";var n=r("CcnG"),i=r("ZL0t"),a=r("EdRb"),o=r("t/Na"),s=r("5nLG"),c=r("5weA"),m=r("Ce+4"),p=r("iBZZ");r("a4Ar"),r("bkLN"),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var l=n["\u0275crt"]({encapsulation:0,styles:[[".list[_ngcontent-%COMP%]{height:94vh;overflow-y:auto}.map-content[_ngcontent-%COMP%]{margin-top:-5px}"]],data:{}});function u(e){return n["\u0275vid"](0,[(e()(),n["\u0275eld"](0,0,null,null,4,"pnx-map",[["class","map-card"]],null,null,null,i.b,i.a)),n["\u0275prd"](512,null,a.b,a.b,[o.c]),n["\u0275did"](2,114688,null,0,a.a,[s.a,c.a,o.c,a.b],{height:[0,"height"]},null),(e()(),n["\u0275eld"](3,0,null,null,1,"pnx-geojson",[],null,null,null,m.b,m.a)),n["\u0275did"](4,638976,null,0,p.a,[s.a],{geojson:[0,"geojson"],onEachFeature:[1,"onEachFeature"]},null)],(function(e,t){var r=t.component;e(t,2,0,r.height),e(t,4,0,r.mapListService.geojsonData,r.onEachFeature.bind(r))}),null)}},zjWw:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("CcnG"),i=(r("5nLG"),r("2urx")),a=r("4R65"),o=(r("5weA"),function(){function e(e,t){this.mapservice=e,this._commonService=t,this.defaultEnable=!0,this.markerChanged=new n.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;this.map=this.mapservice.map,this.zoomLevel=this.zoomLevel||i.a.MAPCONFIG.ZOOM_LEVEL_RELEVE,this.setMarkerLegend(),this.defaultEnable?this.enableMarkerOnClick():this.changeMarkerButtonColor(!1),this.mapservice.isMarkerEditing$.subscribe((function(t){e.toggleEditing(t)}))},e.prototype.setMarkerLegend=function(){var e=this,t=this.mapservice.addCustomLegend("topleft","markerLegend","url(assets/images/location-pointer.png)");this.map.addControl(new t),document.getElementById("markerLegend").style.backgroundColor="#c8c8cc",a.DomEvent.disableClickPropagation(document.getElementById("markerLegend")),document.getElementById("markerLegend").onclick=function(){e.toggleEditing(!0)}},e.prototype.enableMarkerOnClick=function(){var e=this;this.map.on("click",(function(t){e.mapservice.firstLayerFromMap=!1,e.map.getZoom()<e.zoomLevel?e._commonService.translateToaster("warning","Map.ZoomWarning"):e.generateMarkerAndEvent(t.latlng.lng,t.latlng.lat)}))},e.prototype.generateMarkerAndEvent=function(e,t){void 0!==this.mapservice.marker?(this.mapservice.marker.remove(),this.mapservice.marker=this.mapservice.createMarker(e,t,!0).addTo(this.map),this.previousCoord=[e,t],this.markerMoveEvent(this.mapservice.marker)):(this.mapservice.marker=this.mapservice.createMarker(e,t,!0).addTo(this.map),this.markerMoveEvent(this.mapservice.marker)),this.mapservice.firstLayerFromMap=!1,this.markerChanged.emit(this.markerToGeojson(this.mapservice.marker.getLatLng()))},e.prototype.markerMoveEvent=function(e){var t=this;e.on("moveend",(function(e){t.map.getZoom()<t.zoomLevel?(t._commonService.translateToaster("warning","Map.ZoomWarning"),t.mapservice.marker.remove(),t.mapservice.marker=t.mapservice.createMarker(t.previousCoord[0],t.previousCoord[1],!0),t.map.addLayer(t.mapservice.marker),t.markerMoveEvent(t.mapservice.marker)):t.markerChanged.emit(t.markerToGeojson(t.mapservice.marker.getLatLng()))}))},e.prototype.changeMarkerButtonColor=function(e){document.getElementById("markerLegend").style.backgroundColor=e?"#c8c8cc":"white"},e.prototype.toggleEditing=function(e){this.mapservice.editingMarker=e,this.changeMarkerButtonColor(this.mapservice.editingMarker),this.mapservice.editingMarker?(this.mapservice.removeAllLayers(this.map,this.mapservice.leafletDrawFeatureGroup),this.mapservice.removeAllLayers(this.map,this.mapservice.fileLayerFeatureGroup),this.enableMarkerOnClick()):(this.mapservice.map.off("click"),void 0!==this.mapservice.marker&&(this.mapservice.marker.off("moveend"),this.map.removeLayer(this.mapservice.marker)))},e.prototype.markerToGeojson=function(e){return{geometry:{type:"Point",coordinates:[e.lng,e.lat]}}},e.prototype.ngOnChanges=function(e){if(e.coordinates&&e.coordinates.currentValue){var t=e.coordinates.currentValue;this.mapservice.zoomOnMarker(t,this.zoomToLocationLevel),this.previousCoord=t,this.generateMarkerAndEvent(t[0],t[1])}},e}())}}]);