(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"49jh":function(n,e,l){"use strict";var t=l("CcnG"),r=l("A7o+"),o=l("Ip0R"),i=l("gIcY"),a=l("BxdG");l("RCMP"),l.d(e,"a",(function(){return u})),l.d(e,"b",(function(){return s}));var u=t["\u0275crt"]({encapsulation:0,styles:[[".form-control[_ngcontent-%COMP%]{padding:.38rem .75rem}"]],data:{}});function s(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"small",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" "," "])),t["\u0275pid"](131072,r.j,[r.k,t.ChangeDetectorRef]),(n()(),t["\u0275eld"](3,0,null,null,9,"div",[["class","input-group"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,8,"input",[["class","form-control form-control-sm"],["placeholder",""],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(n,e,l){var r=!0;return"input"===e&&(r=!1!==t["\u0275nov"](n,7)._handleInput(l.target.value)&&r),"blur"===e&&(r=!1!==t["\u0275nov"](n,7).onTouched()&&r),"compositionstart"===e&&(r=!1!==t["\u0275nov"](n,7)._compositionStart()&&r),"compositionend"===e&&(r=!1!==t["\u0275nov"](n,7)._compositionEnd(l.target.value)&&r),r}),null,null)),t["\u0275did"](5,278528,null,0,o.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](6,{"is-invalid":0}),t["\u0275did"](7,16384,null,0,i.DefaultValueAccessor,[t.Renderer2,t.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),t["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,(function(n){return[n]}),[i.DefaultValueAccessor]),t["\u0275did"](9,540672,null,0,i.FormControlDirective,[[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR],[2,i["\u0275angular_packages_forms_forms_p"]]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,i.NgControl,null,[i.FormControlDirective]),t["\u0275did"](11,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null),t["\u0275did"](12,16384,null,0,a.a,[i.NgControl],{disableControl:[0,"disableControl"]},null)],(function(n,e){var l=e.component,t=n(e,6,0,l.parentFormControl.invalid);n(e,5,0,"form-control form-control-sm",t),n(e,9,0,l.parentFormControl),n(e,12,0,l.disabled)}),(function(n,e){n(e,1,0,t["\u0275unv"](e,1,0,t["\u0275nov"](e,2).transform("Releve.Observers"))),n(e,4,0,t["\u0275nov"](e,11).ngClassUntouched,t["\u0275nov"](e,11).ngClassTouched,t["\u0275nov"](e,11).ngClassPristine,t["\u0275nov"](e,11).ngClassDirty,t["\u0275nov"](e,11).ngClassValid,t["\u0275nov"](e,11).ngClassInvalid,t["\u0275nov"](e,11).ngClassPending)}))}},CMxW:function(n,e,l){"use strict";l.d(e,"a",(function(){return a}));var t=l("CcnG"),r=(l("5nLG"),l("4R65")),o=l("qwng"),i=l("mFOs"),a=function(){function n(n,e){this.mapService=n,this._toasterService=e,this.editMode=!1,this.onLoad=new t.EventEmitter,this.onGeomChange=new t.EventEmitter}return n.prototype.ngOnInit=function(){this.style=this.style||this.mapService.searchStyle},n.prototype.ngAfterViewInit=function(){var n=this;this.mapService.initializefileLayerFeatureGroup(),this.map=this.mapService.getMap(),this.mapService.fileLayerEditionMode=this.editMode,i(null,r,o),r.Control.FileLayerLoad.LABEL='<img class="icon" width="15" src="assets/images/folder.svg" alt="file icon"/>',this.fileLayerControl=r.Control.fileLayerLoad({layer:r.geoJson,addToMap:!1,fileSizeLimit:10024,formats:[".gpx",".geojson",".kml"]}).addTo(this.map),this.fileLayerControl.loader.on("data:loaded",(function(e){var l;n.mapService.removeAllLayers(n.mapService.map,n.mapService.leafletDrawFeatureGroup),n.mapService.setEditingMarker(!1),n.mapService.removeAllLayers(n.mapService.map,n.mapService.fileLayerFeatureGroup);var t=[];for(var o in e.layer._layers){t.push(l=e.layer._layers[o].feature);var i=r.geoJSON(l,{pointToLayer:function(n,e){return r.circleMarker(e)},onEachFeature:function(e,t){var r="";for(var o in l.properties)r+="<b>"+o+"</b> : "+l.properties[o]+" <br>";t.on("contextmenu",(function(n){r.length>0&&(t.bindPopup(r),t.openPopup())})),n.editMode&&t.on("click",(function(e){n.previousCurrentLayer&&n.previousCurrentLayer.setStyle(n.style),t.setStyle({color:"red"}),n.previousCurrentLayer=t,n.mapService.firstLayerFromMap=!1,n.onGeomChange.emit(t.feature)}))},style:n.style});n.mapService.fileLayerFeatureGroup.addLayer(i),n.onLoad.emit(t)}n.previousLayer&&n.map.removeLayer(n.previousLayer),n.previousLayer=e.layer})),this.fileLayerControl.loader.on("data:error",(function(e){n._toasterService.error(e.error.message,"Erreur d'import"),console.error(e)}))},n.prototype.ngOnChanges=function(n){n&&n.removeLayer&&n.removeLayer.currentValue&&this.previousLayer&&this.map.removeLayer(this.previousLayer)},n}()},OCvQ:function(n,e,l){"use strict";var t=l("CcnG"),r=l("gIcY"),o=l("Ip0R"),i=l("c4+1"),a=l("GXsC");l("ym3J"),l("e9I2"),l.d(e,"a",(function(){return u})),l.d(e,"b",(function(){return g}));var u=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function s(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"option",[],null,null,null,null,null)),t["\u0275did"](1,147456,null,0,r.NgSelectOption,[t.ElementRef,t.Renderer2,[2,r.SelectControlValueAccessor]],{ngValue:[0,"ngValue"]},null),t["\u0275did"](2,147456,null,0,r["\u0275angular_packages_forms_forms_x"],[t.ElementRef,t.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(n()(),t["\u0275ted"](3,null,[" "," "]))],(function(n,e){n(e,1,0,e.context.$implicit),n(e,2,0,e.context.$implicit)}),(function(n,e){n(e,3,0,null==e.context.$implicit?null:e.context.$implicit.attribut_label)}))}function d(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,14,"div",[],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"small",[],null,null,null,null,null)),(n()(),t["\u0275ted"](2,null,[" "," "])),(n()(),t["\u0275eld"](3,0,null,null,11,"div",[["class","input-group filter-control"]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,10,"select",[["class","form-control form-control-sm"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"blur"]],(function(n,e,l){var r=!0;return"change"===e&&(r=!1!==t["\u0275nov"](n,5).onChange(l.target.value)&&r),"blur"===e&&(r=!1!==t["\u0275nov"](n,5).onTouched()&&r),r}),null,null)),t["\u0275did"](5,16384,null,0,r.SelectControlValueAccessor,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,r.NG_VALUE_ACCESSOR,(function(n){return[n]}),[r.SelectControlValueAccessor]),t["\u0275did"](7,540672,null,0,r.FormControlDirective,[[8,null],[8,null],[6,r.NG_VALUE_ACCESSOR],[2,r["\u0275angular_packages_forms_forms_p"]]],{form:[0,"form"]},null),t["\u0275prd"](2048,null,r.NgControl,null,[r.FormControlDirective]),t["\u0275did"](9,16384,null,0,r.NgControlStatus,[[4,r.NgControl]],null,null),(n()(),t["\u0275eld"](10,0,null,null,2,"option",[],null,null,null,null,null)),t["\u0275did"](11,147456,null,0,r.NgSelectOption,[t.ElementRef,t.Renderer2,[2,r.SelectControlValueAccessor]],{ngValue:[0,"ngValue"]},null),t["\u0275did"](12,147456,null,0,r["\u0275angular_packages_forms_forms_x"],[t.ElementRef,t.Renderer2,[8,null]],{ngValue:[0,"ngValue"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,s)),t["\u0275did"](14,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var l=e.component;n(e,7,0,l.selectControl),n(e,11,0,null),n(e,12,0,null),n(e,14,0,l.formsDefinition)}),(function(n,e){n(e,2,0,e.component.selectLabel),n(e,4,0,t["\u0275nov"](e,9).ngClassUntouched,t["\u0275nov"](e,9).ngClassTouched,t["\u0275nov"](e,9).ngClassPristine,t["\u0275nov"](e,9).ngClassDirty,t["\u0275nov"](e,9).ngClassValid,t["\u0275nov"](e,9).ngClassInvalid,t["\u0275nov"](e,9).ngClassPending)}))}function c(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-trash-o clickable trash-btn"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.removeFormControl(n.parent.context.index)&&t),t}),null,null))],null,null)}function f(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","dynamic-form-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"pnx-dynamic-form",[["class","dynamic-form padding-sm"]],null,null,null,i.b,i.a)),t["\u0275did"](2,114688,null,0,a.a,[],{formDef:[0,"formDef"],form:[1,"form"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,c)),t["\u0275did"](4,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,2,0,e.context.$implicit,l.myFormGroup),n(e,4,0,!l.autoGenerated)}),null)}function p(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"i",[["aria-hidden","true"],["class","fa fa-trash-o clickable trash-btn"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.removeFormControl(n.parent.context.index)&&t),t}),null,null))],null,null)}function m(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","dynamic-form-wrapper"],["hidden",""]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"pnx-dynamic-form",[["class","dynam\n      ic-form padding-sm"]],null,null,null,i.b,i.a)),t["\u0275did"](2,114688,null,0,a.a,[],{formDef:[0,"formDef"],form:[1,"form"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](4,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,2,0,e.context.$implicit,l.myFormGroup),n(e,4,0,!l.autoGenerated)}),null)}function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","full-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](2,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](4,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(n,e){var l=e.component;n(e,2,0,l.formsSelected),n(e,4,0,l.formsSelectedHidden)}),null)}function g(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,d)),t["\u0275did"](1,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](3,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(n,e){var l=e.component;n(e,1,0,!l.autoGenerated),n(e,3,0,l.formControlBuilded)}),null)}},QqSC:function(n,e,l){"use strict";l.d(e,"a",(function(){return r})),l.d(e,"b",(function(){return o}));var t=l("CcnG"),r=(l("CMxW"),l("5nLG"),l("SZbH"),t["\u0275crt"]({encapsulation:2,styles:[],data:{}}));function o(n){return t["\u0275vid"](0,[],null,null)}},RCMP:function(n,e,l){"use strict";l.d(e,"a",(function(){return r}));var t=l("mrSG"),r=function(n){function e(){return n.call(this)||this}return Object(t.c)(e,n),e.prototype.ngOnInit=function(){},e}(l("p2ub").a)},mFOs:function(n,e,l){var t,r;!function(o,i){i.toGeoJSON?(t=[l("4R65")],void 0===(r=(function(n){o(n,i.toGeoJSON)}).apply(e,t))||(n.exports=r)):n.exports?n.exports=function(n,e,t){return void 0===e&&(e=void 0!==i?l("4R65"):l("4R65")(n)),void 0===t&&(t=void 0!==i?l("qwng"):l("qwng")(n)),o(e,t),e}:void 0!==i&&i.L&&i.toGeoJSON&&o(i.L,i.toGeoJSON)}((function(n,e){var l=n.Layer.extend({options:{layer:n.geoJson,layerOptions:{},fileSizeLimit:1024},initialize:function(e,l){this._map=e,n.Util.setOptions(this,l),this._parsers={geojson:this._loadGeoJSON,json:this._loadGeoJSON,gpx:this._convertToGeoJSON,kml:this._convertToGeoJSON}},load:function(e,l){var t,r;return!this._isParameterMissing(e,"file")&&!!this._isFileSizeOk(e.size)&&!!(t=this._getParser(e.name,l))&&((r=new FileReader).onload=n.Util.bind((function(n){var l;try{this.fire("data:loading",{filename:e.name,format:t.ext}),l=t.processor.call(this,n.target.result,t.ext),this.fire("data:loaded",{layer:l,filename:e.name,format:t.ext})}catch(r){this.fire("data:error",{error:r})}}),this),e.testing||r.readAsText(e),r)},loadMultiple:function(n,e){var l=[];if(n[0])for(n=Array.prototype.slice.apply(n);n.length>0;)l.push(this.load(n.shift(),e));return l},loadData:function(n,e,l){var t,r;if(!this._isParameterMissing(n,"data")&&!this._isParameterMissing(e,"name")&&this._isFileSizeOk(n.length)&&(t=this._getParser(e,l)))try{this.fire("data:loading",{filename:e,format:t.ext}),r=t.processor.call(this,n,t.ext),this.fire("data:loaded",{layer:r,filename:e,format:t.ext})}catch(o){this.fire("data:error",{error:o})}},_isParameterMissing:function(n,e){return void 0===n&&(this.fire("data:error",{error:new Error("Missing parameter: "+e)}),!0)},_getParser:function(n,e){var l;if(e=e||n.split(".").pop(),l=this._parsers[e])return{processor:l,ext:e};this.fire("data:error",{error:new Error("Unsupported file type ("+e+")")})},_isFileSizeOk:function(n){var e=(n/1024).toFixed(4);return!(e>this.options.fileSizeLimit&&(this.fire("data:error",{error:new Error("File size exceeds limit ("+e+" > "+this.options.fileSizeLimit+"kb)")}),1))},_loadGeoJSON:function(n){var e;if("string"==typeof n&&(n=JSON.parse(n)),0===(e=this.options.layer(n,this.options.layerOptions)).getLayers().length)throw new Error("GeoJSON has no valid layers.");return this.options.addToMap&&e.addTo(this._map),e},_convertToGeoJSON:function(n,l){var t;return"string"==typeof n&&(n=(new window.DOMParser).parseFromString(n,"text/xml")),t=e[l](n),this._loadGeoJSON(t)}}),t=n.Control.extend({statics:{TITLE:"Load local file (GPX, KML, GeoJSON)",LABEL:"&#8965;"},options:{position:"topleft",fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(e){n.Util.setOptions(this,e),this.loader=null},onAdd:function(e){return this.loader=n.FileLayer.fileLoader(e,this.options),this.loader.on("data:loaded",(function(n){this.options.fitBounds&&window.setTimeout((function(){e.fitBounds(n.layer.getBounds())}),500)}),this),this._initDragAndDrop(e),this._initContainer()},_initDragAndDrop:function(n){var e,l=this.loader,t=n._container,r={dragenter:function(){n.scrollWheelZoom.disable()},dragleave:function(){n.scrollWheelZoom.enable()},dragover:function(n){n.stopPropagation(),n.preventDefault()},drop:function(e){e.stopPropagation(),e.preventDefault(),l.loadMultiple(e.dataTransfer.files),n.scrollWheelZoom.enable()}};for(e in r)r.hasOwnProperty(e)&&t.addEventListener(e,r[e],!1)},_initContainer:function(){var e,l=this.loader,t="leaflet-control-filelayer leaflet-control-zoom",r=n.DomUtil.create("div",t+" leaflet-bar"),o=n.DomUtil.create("a",t+"-in leaflet-bar-part",r);return o.innerHTML=n.Control.FileLayerLoad.LABEL,o.href="#",o.title=n.Control.FileLayerLoad.TITLE,(e=n.DomUtil.create("input","hidden",r)).type="file",e.multiple="multiple",e.accept=this.options.formats?this.options.formats.join(","):".gpx,.kml,.json,.geojson",e.style.display="none",e.addEventListener("change",(function(){l.loadMultiple(this.files),this.value=""}),!1),n.DomEvent.disableClickPropagation(o),n.DomEvent.on(o,"click",(function(n){e.click(),n.preventDefault()})),r}});n.FileLayer={},n.FileLayer.FileLoader=l,n.FileLayer.fileLoader=function(e,l){return new n.FileLayer.FileLoader(e,l)},n.Control.FileLayerLoad=t,n.Control.fileLayerLoad=function(e){return new n.Control.FileLayerLoad(e)}}),window)},ym3J:function(n,e,l){"use strict";l.d(e,"a",(function(){return r}));var t=l("gIcY"),r=(l("e9I2"),function(){function n(n){this._dynformService=n,this.formControlBuilded=!1,this.selectControl=new t.FormControl,this.autoGenerated=!1,this.formsSelected=[],this.formsSelectedHidden=[]}return n.prototype.ngOnInit=function(){var n=this;this.autoGenerated?(this.formsSelected=this.formsDefinition.filter((function(n){return!n.hidden})),this.formsSelectedHidden=this.formsDefinition.filter((function(n){return n.hidden})),this.formsDefinition.forEach((function(e){e.type_widget&&n._dynformService.addNewControl(e,n.myFormGroup)}))):(this.selectControl.valueChanges.filter((function(n){return null!==n})).subscribe((function(e){n.addFormControl(e)})),this.formsDefinition.sort((function(n,e){return n.attribut_label.localeCompare(e.attribut_label)}))),this.formControlBuilded=!0},n.prototype.removeFormControl=function(n){var e=this.formsSelected[n];this.formsSelected.splice(n,1),this.formsDefinition.push(e),this.myFormGroup.removeControl(e.attribut_name),this.selectControl.setValue(null)},n.prototype.addFormControl=function(n){this.formsSelected.push(n),this.formsDefinition=this.formsDefinition.filter((function(e){return e.attribut_name!==n.attribut_name})),this._dynformService.addNewControl(n,this.myFormGroup)},n}())}}]);